{% extends "EmptyBaseTemplate.html" %}



{% block content %}

<div class="container">
<h1>
    Account name: 
{{ account.AccountType }}
</h1>
<h2>
cc-number: {{ account.Id }} <br>Balance: {{account.Balance}}
</h2>
<table class="transaktioner" id="posts-table">
<thead>
    <th>Id</th>
    <th>Date</th>
    <th>Operation</th>
    <th>Amount</th>
    <th>Type</th>
    <th>NewBalance</th>
    <th><td><a href="/customer/account/newdeposit/{{ account.Id }}" class='btn'>Deposit</a></th>
        <th><td><a href="/customer/account/newwithdrawal/{{ account.Id }}" class='btn'>Withdrawal</a></th>
        <th><td><a href="/customer/account/transfer/{{ account.Id }}" class='btn'>Transfer</a></th>
</thead>
<tbody>

    </tbody>
</table>



<button onclick="fetchMore()">Working!</button>

<script>
    pageNo = 1;
    function fetchMore(){
        console.log('work!');
        fetch("/api/customer/account/{{account.Id}}/?page=" + pageNo)
        .then((response) => response.json())
        .then((json) => {
            pageNo = pageNo + 1;
            json.forEach(tableElements);
        }
    );
}


function tableElements(element){
    console.log(element.ID)
    document.querySelector('#posts-table tbody').innerHTML +=
    `<tr>
        <td>${element.ID}</td>
        <td>${element.Type}</td>
        <td>${element.Date}</td>
        <td>${element.Amount}</td>
        <td>${element.NewBalance}</td>
        <td>${element.AccountId}</td>
    </tr>`;
}
document.addEventListener("DOMContentLoaded", function (){
    fetchMore();
});
</script>


{% endblock %}